<div class="summary-container">
  <h2 class="page-title">Ugovoreni elementi osiguranja</h2>

  <div class="card-grid">
    <div class="custom-card">
      <h5 class="card-title">Prikaz odabranog paketa:</h5>
      <p><strong>Broj polise: </strong>{{ policy?.Number }} &nbsp;</p>
      <p><strong>Datum proračuna: </strong>{{ policy?.PolicyDate | date:'dd.MM.yyyy.' }} &nbsp;</p>
      <p><strong>Trajanje ugovora: </strong>od {{ policy?.StartDate | date:'dd.MM.yyyy. HH:mm' }}h do {{ policy?.EndDate | date:'dd.MM.yyyy. HH:mm' }}h &nbsp;</p>
      <p><strong>Paket osiguranja: </strong> {{ this.selectedTab.coverrageLevelName }} &nbsp;</p>
      <p><strong>Ukupno za uplatu <br>(uračunat je porez u visini od 5%): </strong>{{ policy?.FinalAmount| number:'1.2-2' }} RSD &nbsp;</p>
    </div>

    <div class="custom-card">
      <h5 class="card-title">Osigurano vozilo:</h5>
      <p><strong>Tip vozila: </strong>{{ policy?.VehicleType }}&nbsp;</p>
      <p><strong>Marka vozila: </strong>{{ policy?.VehicleBrand }} &nbsp;</p>
      <p><strong>Registarska oznaka vozila: </strong>{{ policy?.PlatesNumber }} &nbsp;</p>
      <p><strong>Broj šasije: </strong>{{ policy?.ChassisNumber }}</p>
    </div>

    <div class="custom-card">
      <h5 class="card-title">Ugovarač osiguranja/osiguranik</h5>
      <p><strong>Ime: </strong>{{ (client?.FirstName || '') ? (client!.FirstName!.charAt(0).toUpperCase() + client!.FirstName!.slice(1).toLowerCase()) : '' }}&nbsp;</p>
      <p><strong>Prezime: </strong>{{ (client?.LastName || '') ? (client!.LastName!.charAt(0).toUpperCase() + client!.LastName!.slice(1).toLowerCase()) : '' }} &nbsp;</p>
      <p><strong>JMBG: </strong>{{ client?.RegistrationNumber }} &nbsp;</p>
      <p><strong>Adresa: </strong>{{ client?.Address }} &nbsp;</p>
      <p><strong>Mobilni telefon: </strong>{{ client?.Phone }} &nbsp;</p>
      <p><strong>E-mail adresa: </strong>{{ client?.Email }} &nbsp;</p>
    </div>
    
    <div class="custom-card premium-card">
      <h5 class="card-title">Premija:</h5>
      <p><strong>Ukupna premija bez poreza: </strong>{{ policy?.Amount | number:'1.2-2' }} RSD</p>
      <!-- <p><strong>Popust ( {{ policy?.ApplicationDiscount?.Discount }} %): </strong>{{(policy?.Discount || 0) | number:'1.2-2'}} RSD</p> -->
      <p><strong>Porez (5%): </strong>{{ ((policy?.Tax || 0))  | number:'1.2-2' }} RSD</p>
      <p class="total-premium"><strong>Ukupno: </strong>{{ policy?.FinalAmount | number:'1.2-2' }} RSD</p>
    </div>
  </div>

  <div class="button-wrapper">
    <gbs-button
      [cid]="'btnBack'"
      [text]="'Nazad'"
      [inputCssClass]="''"
      [inputStyle]="{}"
      (clickEvent)="goToPreviousStep()"
      title="Nazad na prethodni korak"
    ></gbs-button>

    <ng-container *ngIf="checkPolicyDone">
      <ng-container *ngIf="checkStatus === 1">
        <div class="payment-form" [innerHTML]="paymentForm"></div>
      </ng-container>

      <ng-container *ngIf="checkStatus !== 1">
        <div class="custom-card full-width error-message">
          <p>{{ checkMessage || 'Polisa nije prošla proveru. Plaćanje nije moguće.' }}</p>
        </div>
      </ng-container>

      <ng-container *ngIf="checkStatus !== 1 && checkStatus !== 0">
        <div class="custom-card full-width error-message">
          <p>Došlo je do neočekivane greške. Pokušajte ponovo kasnije.</p>
        </div>
      </ng-container>
    </ng-container>

    <ng-container *ngIf="!checkPolicyDone">
      <p>Provera polise u toku...</p>
    </ng-container>
  </div>
</div>
